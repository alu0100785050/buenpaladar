<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">
<TITLE>Mi página de autenticación</TITLE>
</HEAD>
<BODY>
User name:<br>
<input id="txtEmail" type="text" name="username"><br>
User password:<br>
<input id="txtPassword" type="password" name="psw">
<button id = "btnLogin">Login </button>
<button id = "btnSignUp">Registrarse </button>
<button id = "btnLogout">Logout </button>
<!-- Código para integrar Firebase -->
<script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
<script>
// Initialize Firebase
var config = {
apiKey: "AIzaSyDl2BtvCD4G8Hff-DZl1gTWLxrCh8z2FOU",
authDomain: "usuarios-98267.firebaseapp.com",
databaseURL: "https://usuarios-98267.firebaseio.com",
projectId: "usuarios-98267",
storageBucket: "usuarios-98267.appspot.com",
messagingSenderId: "727321561913"
};
firebase.initializeApp(config);
const btnLogin = document.getElementById('btnLogin');
const btnSignUp = document.getElementById('btnSignUp');
const btnLogout = document.getElementById('btnLogout');
//Añadir evento Login
btnLogin.addEventListener('click', e =>{
//obtenemos valoer email y pass
const email= txtEmail.value;
const pass= txtPassword.value;
const auth= firebase.auth();
//Sign in
const promise = auth.signInWithEmailAndPassword(email,pass);
promise.catch(e =>alert('Error message: '+ e.message));
//console.log (e.message));
});
//Añadir evento Registro
btnSignUp.addEventListener('click', e =>{
//obtenemos valoer email y pass
const email= txtEmail.value;
const pass= txtPassword.value;
const auth= firebase.auth();
//Registrarse
const promise = auth.createUserWithEmailAndPassword(email,pass);
promise.catch(e =>alert('Error message: '+ e.message));
//console.log (e.message));
});
//Añadir evento Logout
btnLogout.addEventListener('click', e =>{
firebase.auth().signOut();
});
//Añadir un listener. Para detectar los cambios de logeado a no logeado
firebase.auth().onAuthStateChanged(firebaseUser => {
if (firebaseUser){
console.log (firebaseUser);
}else{
console.log('no logueado');
}
});
</script>
</BODY>
</HTML>
